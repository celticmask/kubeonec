apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "apache.fullname" . }}-extendedconfigs
  labels:
    {{- include "apache.labels" . | nindent 4 }}
data:
  httpd-default.conf: |
    {{- if .Values.apacheDefaultSiteConfig }}
    {{ .Values.apacheDefaultSiteConfig | nindent 4 }}
    {{- else }}
    <VirtualHost 0.0.0.0:{{ .Values.containerPort }}>
        ServerAdmin webmaster@localhost
        ServerName dummy-host.example.com
        ServerAlias www.dummy-host.example.com
        ErrorLog "logs/dummy-host.example.com-error_log"
        CustomLog "logs/dummy-host.example.com-access_log" common
    </VirtualHost>
    {{- end }}
